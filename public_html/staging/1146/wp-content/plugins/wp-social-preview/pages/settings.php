<div class="wpsocpr-header">
    <h1><?php _e( 'WP Social Preview', $this->textDomain ) ?></h1>
    <div class="wpsocpr-subnav">
        <ul>
            <li>
                <a href="#general" class="wpsocpr-nav tab-active">
	                <svg height="20px" version="1.1" viewBox="0 0 20 20" width="20px" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title/><desc/><defs/><g fill="none" fill-rule="evenodd" id="Page-1" stroke="none" stroke-width="1"><g fill="#000000" id="Core" transform="translate(-464.000000, -380.000000)"><g id="settings" transform="translate(464.000000, 380.000000)"><path d="M17.4,11 C17.4,10.7 17.5,10.4 17.5,10 C17.5,9.6 17.5,9.3 17.4,9 L19.5,7.3 C19.7,7.1 19.7,6.9 19.6,6.7 L17.6,3.2 C17.5,3.1 17.3,3 17,3.1 L14.5,4.1 C14,3.7 13.4,3.4 12.8,3.1 L12.4,0.5 C12.5,0.2 12.2,0 12,0 L8,0 C7.8,0 7.5,0.2 7.5,0.4 L7.1,3.1 C6.5,3.3 6,3.7 5.4,4.1 L3,3.1 C2.7,3 2.5,3.1 2.3,3.3 L0.3,6.8 C0.2,6.9 0.3,7.2 0.5,7.4 L2.6,9 C2.6,9.3 2.5,9.6 2.5,10 C2.5,10.4 2.5,10.7 2.6,11 L0.5,12.7 C0.3,12.9 0.3,13.1 0.4,13.3 L2.4,16.8 C2.5,16.9 2.7,17 3,16.9 L5.5,15.9 C6,16.3 6.6,16.6 7.2,16.9 L7.6,19.5 C7.6,19.7 7.8,19.9 8.1,19.9 L12.1,19.9 C12.3,19.9 12.6,19.7 12.6,19.5 L13,16.9 C13.6,16.6 14.2,16.3 14.7,15.9 L17.2,16.9 C17.4,17 17.7,16.9 17.8,16.7 L19.8,13.2 C19.9,13 19.9,12.7 19.7,12.6 L17.4,11 L17.4,11 Z M10,13.5 C8.1,13.5 6.5,11.9 6.5,10 C6.5,8.1 8.1,6.5 10,6.5 C11.9,6.5 13.5,8.1 13.5,10 C13.5,11.9 11.9,13.5 10,13.5 L10,13.5 Z" id="Shape"/></g></g></g></svg>
                    General Settings
                </a>
            </li>
            <li>
                <a href="#facebook" class="wpsocpr-nav">
                    <svg enable-background="new 0 0 56.693 56.693" height="56.693px" id="Layer_1" version="1.1" viewBox="0 0 56.693 56.693" width="56.693px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M40.43,21.739h-7.645v-5.014c0-1.883,1.248-2.322,2.127-2.322c0.877,0,5.395,0,5.395,0V6.125l-7.43-0.029  c-8.248,0-10.125,6.174-10.125,10.125v5.518h-4.77v8.53h4.77c0,10.947,0,24.137,0,24.137h10.033c0,0,0-13.32,0-24.137h6.77  L40.43,21.739z"/></svg>
                    Facebook Settings
                </a>
            </li>
            <li>
                <a href="#twitter" class="wpsocpr-nav">
                    <svg enable-background="new 0 0 56.693 56.693" height="56.693px" id="Layer_1" version="1.1" viewBox="0 0 56.693 56.693" width="56.693px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M52.837,15.065c-1.811,0.805-3.76,1.348-5.805,1.591c2.088-1.25,3.689-3.23,4.444-5.592c-1.953,1.159-4.115,2-6.418,2.454  c-1.843-1.964-4.47-3.192-7.377-3.192c-5.581,0-10.106,4.525-10.106,10.107c0,0.791,0.089,1.562,0.262,2.303  c-8.4-0.422-15.848-4.445-20.833-10.56c-0.87,1.492-1.368,3.228-1.368,5.082c0,3.506,1.784,6.6,4.496,8.412  c-1.656-0.053-3.215-0.508-4.578-1.265c-0.001,0.042-0.001,0.085-0.001,0.128c0,4.896,3.484,8.98,8.108,9.91  c-0.848,0.23-1.741,0.354-2.663,0.354c-0.652,0-1.285-0.063-1.902-0.182c1.287,4.015,5.019,6.938,9.441,7.019  c-3.459,2.711-7.816,4.327-12.552,4.327c-0.815,0-1.62-0.048-2.411-0.142c4.474,2.869,9.786,4.541,15.493,4.541  c18.591,0,28.756-15.4,28.756-28.756c0-0.438-0.009-0.875-0.028-1.309C49.769,18.873,51.483,17.092,52.837,15.065z"/></svg>
                    Twitter Settings
                </a>
            </li>
            <li>
                <a href="#pinterest" class="wpsocpr-nav">
                    <svg enable-background="new 0 0 56.693 56.693" height="56.693px" id="Layer_1" version="1.1" viewBox="0 0 56.693 56.693" width="56.693px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M30.374,4.622c-13.586,0-20.437,9.74-20.437,17.864c0,4.918,1.862,9.293,5.855,10.922c0.655,0.27,1.242,0.01,1.432-0.715  c0.132-0.5,0.445-1.766,0.584-2.295c0.191-0.717,0.117-0.967-0.412-1.594c-1.151-1.357-1.888-3.115-1.888-5.607  c0-7.226,5.407-13.695,14.079-13.695c7.679,0,11.898,4.692,11.898,10.957c0,8.246-3.649,15.205-9.065,15.205  c-2.992,0-5.23-2.473-4.514-5.508c0.859-3.623,2.524-7.531,2.524-10.148c0-2.34-1.257-4.292-3.856-4.292  c-3.058,0-5.515,3.164-5.515,7.401c0,2.699,0.912,4.525,0.912,4.525s-3.129,13.26-3.678,15.582  c-1.092,4.625-0.164,10.293-0.085,10.865c0.046,0.34,0.482,0.422,0.68,0.166c0.281-0.369,3.925-4.865,5.162-9.359  c0.351-1.271,2.011-7.859,2.011-7.859c0.994,1.896,3.898,3.562,6.986,3.562c9.191,0,15.428-8.379,15.428-19.595  C48.476,12.521,41.292,4.622,30.374,4.622z"/></svg>
                    Pinterest Settings
                </a>
            </li>
            <li>
                <a href="#pro" class="wpsocpr-nav">
	                <svg height="128px" id="Layer_1" style="enable-background:new 0 0 128 128;" version="1.1" viewBox="0 0 128 128" width="128px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><line style="fill:none;stroke:#2F3435;stroke-width:12;stroke-miterlimit:10;" x1="13.787" x2="114.213" y1="64.001" y2="64.001"/><line style="fill:none;stroke:#2F3435;stroke-width:12;stroke-miterlimit:10;" x1="64" x2="64" y1="13.787" y2="114.213"/></g></svg>
                    Pro
                </a>
            </li>
        </ul>
    </div>
</div>
<div class="wpsocpr-content wrap">
    <div class="wpsocpr-content-settings">
        <div class="wpsocpr-content-settings-main">
            <div id="wpsocpr-notices"></div>
            <form method="post" action="options.php">
                <?php
                settings_fields( 'wp_social_preview' );

                /**
                 * Override do_settings_sections to tweak markup
                 */
                $page = 'wp_social_preview';
                global $wp_settings_sections, $wp_settings_fields;

                if ( isset( $wp_settings_sections[ $page ] ) ) {
                    foreach ( (array) $wp_settings_sections[ $page ] as $section ) {
                        echo "<div id=\"{$section['id']}\" class='wpsocpr-setting-section'>";

                        if ( $section['callback'] ) {
                            call_user_func( $section['callback'], $section );
                        }

                        if ( ! isset( $wp_settings_fields ) || ! isset( $wp_settings_fields[ $page ] ) || ! isset( $wp_settings_fields[ $page ][ $section['id'] ] ) ) {
                            continue;
                        }
                        echo '<table class="form-table" role="presentation">';
                        do_settings_fields( $page, $section['id'] );
                        echo '</table>';

                        submit_button();

                        echo '</div>';
                    }
                }
                ?>
                <div id="pro_settings" class="wpsocpr-setting-section">
                    <script async data-uid="8fe28b7ea9" src="https://dev7studios.ck.page/8fe28b7ea9/index.js"></script>
                </div>
            </form>
        </div>
        <div class="wpsocpr-content-settings-sidebar">
            <div class="wpsocpr-settings-sidebar">
                <h3>Upgrade to Pro</h3>
                <p>Get advanced "pro" plugin features and support for one low annual price.</p>
                <ul>
                    <li>Auto-generate social media images</li>
                    <li>Customize the design of the image</li>
                    <li>Support for individual taxonomies</li>
                    <li>Support for custom post types</li>
                    <li>Support for e-commerce products</li>
                    <li>Support for third-party plugins</li>
                    <li>1 year of pro plugin updates</li>
                    <li>1 year of email support</li>
                </ul>
                <a href="#pro" class="button button-primary wpsocpr-nav">Get Pro</a>
            </div>
        </div>
    </div>
</div>

<script>
    jQuery(document).ready(function ($) {
        // Tab nav
        $('.wpsocpr-nav').click(function (e) {
            e.preventDefault();
            showTab($(this).attr('href'));
        });

        function showTab(id) {
            $('.wpsocpr-subnav a').removeClass('tab-active');
            $('.wpsocpr-subnav a[href="' + id + '"]').addClass('tab-active').blur();

            $('.wpsocpr-setting-section').hide();
            $(id + '_settings').show();
        }

        // Fix notices
        $('.notice').detach().appendTo('#wpsocpr-notices');

        // File selector
        $('.wpsocpr-browse').on('click', function (e) {
            e.preventDefault();

            var $self = $(this);
            var target = '#' + $self.attr('data-target');

            var file_frame = wp.media.frames.file_frame = wp.media({
                title: $self.data('uploader_title'),
                button: {
                    text: $self.data('uploader_button_text'),
                },
                multiple: false
            });

            file_frame.on('select', function () {
                var attachment = file_frame.state().get('selection').first().toJSON();
                $(target).val(attachment.id).change();

                $(target + '_preview').empty();
                $(target + '_preview').append('<img src="' + attachment.sizes.full.url + '" />');
                $self.next('.wpsocpr-remove').show();
            });

            file_frame.open();
        });

        // Remove
        $('.wpsocpr-remove').on('click', function (e) {
            e.preventDefault();

            var $self = $(this);
            var target = '#' + $self.attr('data-target');

            $(target).val('').change();
            $(target + '_preview').empty();
            $self.hide();
        });
    });
</script>

